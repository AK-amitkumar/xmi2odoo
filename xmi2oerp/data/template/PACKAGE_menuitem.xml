<?xml version="1.0" encoding="utf-8"?>
<!--
${LICENSE_HEADER}
-->
<openerp>
    <data>
{%  for menu in MENUES %}\
        <menuitem
            name="${escape(menu.tag.get('label', '<No label>'))}"
            id="menu_${menu.name}"
            sequence="${menu.tag.get('menu_sequence',100)}"
{%      if 'action' in menu.tag %}\
            action="${menu.tag['action']}"
{%      end %}\
{%      if 'action' not in menu.tag and len(list(menu.relateds(uml.CClass))) == 1 %}\
            action="action_${menu.relateds(uml.CClass)[0].package.name}_${menu.relateds(uml.CClass)[0].name}_${menu.tag.get('view','form')}"
{%      end %}\
{%      if len(list(menu.prevs(uml.CUseCase))) > 0 %}\
            parent="menu_${menu.prevs(uml.CUseCase)[0].name}"
{%      end %}\
{%      if len(list(menu.prev_leafs(uml.CActor))) > 0 %}\
            groups="${','.join([ 'group_%s' % actor.name for actor in menu.prev_leafs(uml.CActor)])}"
{%      end %}\
            />
{%  end %}\
    </data>
</openerp>
<!-- vim:expandtab:smartindent:tabstop=4:softtabstop=4:shiftwidth=4
     -->
